{"stages": ["Tier2", "Tier3", "Tier4", "Tier5", "Tier6", "Tier7", "Tier8", "Tier9"], "tier2a": {"stage": "Tier2", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER2 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["fw1-grp1_t28", "fw1-grp2_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}}, "tier2b": {"stage": "Tier2", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER2 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["fw2-grp1_t28", "fw2-grp2_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier2a", "optional": true}]}, "tier3a": {"stage": "Tier3", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER3 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["multi-node_0[1-5]_t28", "multi-node_(0[6-9]|10)_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier2b", "optional": true}]}, "tier3b": {"stage": "Tier3", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER3 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["web-target-2_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier3a", "optional": true}]}, "tier4a": {"stage": "Tier4", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER4 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["web-target-1_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier3b", "optional": true}]}, "tier4b": {"stage": "Tier4", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER4 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["double-tiered_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier4a", "optional": true}]}, "tier5a": {"stage": "Tier5", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER5 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["k8s_0[1-5]_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier4b", "optional": true}]}, "tier5b": {"stage": "Tier5", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER5 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["k8s_spec-1_0[1-5]_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier5a", "optional": true}]}, "tier6a": {"stage": "Tier6", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER6 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["something-green_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier5b", "optional": true}]}, "tier7a": {"stage": "Tier7", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER7 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["wowthisisahostwithaverylongnameforsomereasonicannotunderstand_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier6a", "optional": true}]}, "tier8a": {"stage": "Tier8", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER8 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["wowthisisahostwithaverylongnameforsomereasonicannotunderstand3_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier7a", "optional": true}]}, "tier9a": {"stage": "Tier9", "image": "nexus-hosted.tech.ccdcoe.org/ls26-cicd-image:latest", "tags": ["docker-deployer-slim"], "before_script": ["sudo bash /app/move_needed_files.sh", "echo \"$VAULT_PASS\" >> /app/.vault_pass"], "rules": [{"if": "$REDEPLOY_TIER9 == \"true\"", "when": "on_success"}], "script": ["echo \"Deploying $HOST...\"", "bash /app/deploy.sh $HOST $SKIP_VULNS $DEPLOY_MODE $SNAPSHOT_NAME"], "parallel": {"matrix": [{"HOST": ["wowthisisahostwithaverylongnameforsomereasonicannotunderstand2_t28"]}]}, "dependencies": [], "retry": {"max": 2, "when": ["runner_system_failure", "stuck_or_timeout_failure", "script_failure", "api_failure"], "exit_codes": [1, 137]}, "needs": [{"job": "tier8a", "optional": true}]}}